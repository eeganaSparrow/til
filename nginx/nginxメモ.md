# nginxメモ
## nginxの概要
* 特徴
    * 大量の接続を可能にする優れたスケラービリティ
    * 後発のHTTPサーバである・・・Webサーバのこと
* 用途
    * 静的なコンテンツの配信
    * リバースプロキシとして動作し、Webアプリケーションサーバの機能を補う
* 動作原理
    * HTTPサーバで発生するイベント
        * accept：クライアントからの接続要求
        * read：リクエストの読み込み
        * write：レスポンスの返答
    * I/O処理の効率化
        * I/O Multiplexing
            * 複数のディスクリプタを監視し、入出力可能になるまで待機するシステム
            * 複数のクライアントの要求を並行して処理できるようになる
        * ノンブロッキングI/O
            * すぐに処理できないディスクリプタを中断して別のディスクリプタを実行する
            * I/O関連の処理をよく監視することでプログラムの並行性を高める
        * 非同期I/O
            * 非同期で入出力を行い、並行性を高める
    * 動作モデル
        * マスタプロセスとワーカプロセスのマルチプロセス構成
        * マスタプロセスがワーカプロセスの制御と管理を行う
        * マスタプロセスはワーカプロセスのプロセスIDを持っている

## nginxインストール
* インストール方法
    * homebrewでインストール。以下参照
    * https://github.com/denji/homebrew-nginx
* ファイルの場所
    * nginx.conf（設定ファイル）
        * /opt/homebrew/etc/nginx/nginx.conf
        * nginx -tで確認できる
    * access.log（ログファイル）
        * /opt/homebrew/var/log/nginx/access.log

## nginxの利用
* コマンド
    * nginx・・・起動
    * nginx -t ・・・confファイルの構文チェック
    * nginx -s stop ・・・停止

## 不明な用語
* リバースプロキシ
    * Webサーバの中継として配置することで、セキュリティ、パフォーマンス、信頼性を向上させる
    * 外部Webサーバとの通信を監視するようなもの
* HTTPS終端処理
    * HTTPSからHTTPに復号する処理のこと
* イベント駆動
    * 通常のプログラムは上から順に実行される
    * それに対し、イベントに応じた処理が実行されるというのがイベント駆動
    * その際に以下を利用する
    * システムコール
        * inotify、sigaction
    * ライブラリ
        * libevent、libuv
* ディスクリプタ
    * プログラムが利用するファイルやソケットのための識別子
    * ファイルを特定するための目印のこと
    * ディスクリプタをやり取りすることで、クライアントとの通信が可能になる
* コンテキストスイッチ
    * 動作対象を切り替えること
    * 複数のユーザーを同時処理する場合にオーバーヘッドが大きくなる（C10K問題）
* PID
    * プロセスID
* サードパーティモジュール
    * 公式にはサポートされていない第三者機関が作ったモジュール
    * nginxはこれが豊富で様々な機能を追加できる
* MIME
    * 音声や画像も送れるようにする電子メールの拡張機能